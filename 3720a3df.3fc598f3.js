(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{153:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return b})),n.d(t,"rightToc",(function(){return p})),n.d(t,"default",(function(){return o}));var a=n(2),r=n(6),l=(n(0),n(472)),c={id:"3.jdbc",title:"JDBC",hide_title:!0},b={unversionedId:"javaweb/3.jdbc",id:"javaweb/3.jdbc",isDocsHomePage:!1,title:"JDBC",description:"JDBC\u57fa\u672c\u6982\u5ff5",source:"@site/docs/javaweb/jdbc.md",slug:"/javaweb/3.jdbc",permalink:"/docs/javaweb/3.jdbc",version:"current",sidebar:"someSidebar",previous:{title:"AQS",permalink:"/docs/juc/23.aqs"},next:{title:"MySQL\u57fa\u7840",permalink:"/docs/javaweb/1.mysql"}},p=[{value:"JDBC\u57fa\u672c\u6982\u5ff5",id:"jdbc\u57fa\u672c\u6982\u5ff5",children:[]},{value:"\u5feb\u901f\u5165\u95e8",id:"\u5feb\u901f\u5165\u95e8",children:[]},{value:"\u5bf9JDBC\u5404\u4e2a\u63a5\u53e3\u548c\u7c7b\u8be6\u89e3",id:"\u5bf9jdbc\u5404\u4e2a\u63a5\u53e3\u548c\u7c7b\u8be6\u89e3",children:[]},{value:"JDBC DAO  /  JDBC Utils",id:"jdbc-dao----jdbc-utils",children:[]},{value:"\u7ec3\u4e60",id:"\u7ec3\u4e60",children:[]},{value:"JDBC\u63a7\u5236\u4e8b\u52a1",id:"jdbc\u63a7\u5236\u4e8b\u52a1",children:[]},{value:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60",id:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60",children:[{value:"C3P0",id:"c3p0",children:[]},{value:"Druid",id:"druid",children:[]}]},{value:"Spring JDBCTemplate",id:"spring-jdbctemplate",children:[]}],i={rightToc:p};function o(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(l.b)("wrapper",Object(a.a)({},i,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("h1",{id:"jdbc\u57fa\u672c\u6982\u5ff5"},"JDBC\u57fa\u672c\u6982\u5ff5"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6982\u5ff5\uff1a"),"Java DataBase Connectivity  -- Java\u6570\u636e\u5e93\u8fde\u63a5\n\u671f\u671b\u4f7f\u7528\u4e00\u5957\u7edf\u4e00Java\u4ee3\u7801\u64cd\u4f5c\u6240\u6709\u7684\u5173\u7cfb\u578b\u6570\u636e\u5e93"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"JDBC\uff1a"),"\u5b9a\u4e49\u4e86\u64cd\u4f5c\u6240\u6709\u5173\u7cfb\u578b\u6570\u636e\u5e93\u7684\u89c4\u5219 -> "),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u4e00\u5957",Object(l.b)("strong",{parentName:"li"},"\u63a5\u53e3"),"(Sun)"),Object(l.b)("li",{parentName:"ul"},"\u6bcf\u4e00\u4e2a\u6570\u636e\u5e93\u5382\u5546\u7ed9\u51fa\u81ea\u5df1\u7f16\u5199\u7684",Object(l.b)("strong",{parentName:"li"},"\u5b9e\u73b0\u7c7b"),"  ->  ",Object(l.b)("strong",{parentName:"li"},"\u6570\u636e\u5e93\u9a71\u52a8"))),Object(l.b)("p",null,"JDBC\u63a5\u53e3\u7f16\u7a0b\uff0c\u771f\u6b63\u6267\u884c\u7684\u4ee3\u7801\u65f6\u9a71\u52a8jar\u5305\u4e2d\u7684\u5b9e\u73b0\u7c7b"),Object(l.b)("h1",{id:"\u5feb\u901f\u5165\u95e8"},"\u5feb\u901f\u5165\u95e8"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6b65\u9aa4\uff1a")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"\u5bfc\u5165\u9a71\u52a8jar\u5305 -> mysql-connector-java-5.1.37-bin.jar",Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"\u590d\u5236jar\u5305\u5230\u9879\u76ee\u76ee\u5f55\u4e0b"),Object(l.b)("li",{parentName:"ol"},"add as library"))),Object(l.b)("li",{parentName:"ol"},"\u6ce8\u518c\u9a71\u52a8"),Object(l.b)("li",{parentName:"ol"},"\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61Connection -> Java Code\u4e0e\u6570\u636e\u5e93\u7684\u6865\u6881"),Object(l.b)("li",{parentName:"ol"},"\u5b9a\u4e49SQL"),Object(l.b)("li",{parentName:"ol"},"\u83b7\u53d6\u6267\u884cSQL\u8bed\u53e5\u7684\u5bf9\u8c61 -> Statement"),Object(l.b)("li",{parentName:"ol"},"\u6267\u884csql\uff0c\u63a5\u6536\u8fd4\u56de\u7ed3\u679c"),Object(l.b)("li",{parentName:"ol"},"\u5904\u7406\u7ed3\u679c"),Object(l.b)("li",{parentName:"ol"},"\u91ca\u653e\u8d44\u6e90")),Object(l.b)("h1",{id:"\u5bf9jdbc\u5404\u4e2a\u63a5\u53e3\u548c\u7c7b\u8be6\u89e3"},"\u5bf9JDBC\u5404\u4e2a\u63a5\u53e3\u548c\u7c7b\u8be6\u89e3"),Object(l.b)("p",null,"\u5168\u662f\u63a5\u53e3"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"DriverManager:\u9a71\u52a8\u7ba1\u7406\u5bf9\u8c61"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u529f\u80fd\uff1a"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},'\u6ce8\u518c\u9a71\u52a8\nstatic void registerDriver(Driver driver):\u6ce8\u518c\u4e0e\u7ed9\u5b9a\u7684\u9a71\u52a8\u7a0b\u5e8fDriverManager\n\u5199\u4ee3\u7801\u4f7f\u7528: Class.forName("com.mysql.jdbc.Driver"); (static\u5757\u52a0\u8f7d\u65f6\u6267\u884c\uff0cMySQL 5\u4e4b\u540e\u53ef\u4ee5\u4e0d\u5199 -> \u5728META-INF\u4e0bjava.sql.Driver\u4e0b\u914d\u7f6e\u8fc7\u4e86) '),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'//\u6e90\u4ee3\u7801\npackage com.mysql.jdbc;\n\nimport java.sql.DriverManager;\nimport java.sql.SQLException;\n\npublic class Driver extends NonRegisteringDriver implements java.sql.Driver {\n    public Driver() throws SQLException {\n    }\n\n    static {\n        try {\n            DriverManager.registerDriver(new Driver());\n        } catch (SQLException var1) {\n            throw new RuntimeException("Can\'t register driver!");\n        }\n    }\n}\n'))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u83b7\u53d6\u6570\u636e\u5e93\u94fe\u63a5\nDriverManager\u7c7b:"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{}),"- \u53c2\u6570\n  \n   - url\uff1a\u6307\u5b9a\u94fe\u63a5\u7684\u8def\u5f84\n   \n     ```\n     jdbc:mysql://ip:\u7aef\u53e3/\u6570\u636e\u5e93\u540d\n     ```\n   \n     \u5bf9\u4e8e\u672c\u5730\u6570\u636e\u5e93\n   \n     ```\n     jdbc:mysql:///\u6570\u636e\u5e93\u540d\n     ```\n\n       ```java\n     /*\n     * \u9759\u6001\u65b9\u6cd5\n     */\n     static Connection getConnection(String url, String user, String password)\n       ```\n"))))))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Connection:\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u529f\u80fd\uff1a\u83b7\u53d6\u6267\u884cSQL\u7684\u5bf9\u8c61"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Statement createStatement();"),Object(l.b)("li",{parentName:"ul"},"PreparedStatement preparedStatement(String sql)"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u7ba1\u7406\u4e8b\u52a1\uff1a"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u5f00\u542f\u4e8b\u52a1\uff1a"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"void setAutoCommit(boolean autoCommit);\n"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u63d0\u4ea4\u4e8b\u52a1\uff1a"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"void commit();\n"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u56de\u6eda\u4e8b\u52a1\uff1a"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"void rollback();\n")))))))),Object(l.b)("ol",{start:3},Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"Statement:\u6267\u884c\u9759\u6001sql\u5bf9\u8c61"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"boolean execute(String sql)\uff1a\u4e86\u89e3\uff0c\u53ef\u4ee5\u6267\u884c\u4efb\u610fsql"),Object(l.b)("li",{parentName:"ul"},"int executeUpadate(String sql)\uff1aDML \u589e\u5220\u6539\u3001DDL\u8bed\u53e5\u8868\u5e93\uff0c\u8fd4\u56de\u5f71\u54cd\u6570"),Object(l.b)("li",{parentName:"ul"},"ResultSet executeQuery(String sql): \u6267\u884cDQL \u67e5\u8be2")))),Object(l.b)("ol",{start:4},Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"ResultSet:\u7ed3\u679c\u96c6\u5bf9\u8c61"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("strong",{parentName:"li"},"boolean")," next(): \u5149\u6807\u5411\u4e0b\u79fb\u52a8\u4e00\u4e0b"),Object(l.b)("li",{parentName:"ul"},"getXxx(): \u83b7\u53d6\u6570\u636e(\u4e00\u5217\u4e00\u5217\u83b7\u53d6)",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"Xxx:\u4ee3\u8868\u6570\u636e\u7c7b\u578b"),Object(l.b)("li",{parentName:"ul"},"\u53c2\u6570\uff1a",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"int: \u4ee3\u8868\u5217\u7f16\u53f7\uff0c\u7f16\u53f7\u4ece1\u5f00\u59cb"),Object(l.b)("li",{parentName:"ul"},"String\uff1a\u5217\u540d"))))),Object(l.b)("li",{parentName:"ul"},"\u6ce8\u610f\uff1a",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"\u6b65\u9aa4",Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"\u6e38\u6807\u5411\u4e0b\u79fb\u52a8"),Object(l.b)("li",{parentName:"ol"},"\u5224\u65ad\u662f\u5426\u6709\u6570\u636e while"),Object(l.b)("li",{parentName:"ol"},"\u83b7\u53d6\u6570\u636e"))))))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"PreparedStatement: Statement\u7684\u5b50\u63a5\u53e3\uff0c\u6267\u884c\u52a8\u6001sql\u7684\u5bf9\u8c61"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"SQL\u6ce8\u5165\u95ee\u9898\uff1a\n\u5728\u62fc\u63a5sql\u65f6\uff0c\u6709\u4e00\u4e9bsql\u7684\u7279\u6b8a\u5173\u952e\u5b57\u53c2\u4e0e\u5b57\u7b26\u4e32\u7684\u62fc\u63a5\uff0c\u4f1a\u9020\u6210\u5b89\u5168\u6027\u95ee\u9898"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u8f93\u5165\u7528\u6237\u968f\u4fbf\uff0c\u8f93\u5165\u5bc6\u7801\uff1aa' or 'a' = 'a"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"SELECT * FROM user WHERE username='dwadad' AND password='a' or 'a' = 'a'\n"))))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u89e3\u51b3\uff1aSun\u63d0\u4f9b\u4e86PreparedStatement\u5bf9\u8c61 -> Statement\u5b50\u63a5\u53e3")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u9884\u7f16\u8bd1SQL:\u53c2\u6570\u4f7f\u7528",Object(l.b)("inlineCode",{parentName:"p"},"?"),"\u5360\u4f4d\u7b26\u66ff\u4ee3\uff0c\u6267\u884c\u65f6\u7ed9?\u8d4b\u503c"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"\u6b65\u9aa4\uff1a")),Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u5bfc\u5165\u9a71\u52a8jar\u5305")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u6ce8\u518c\u9a71\u52a8")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"\u6ce8\u610f\uff1asql\u7684\u53c2\u6570\u4f7f\u7528?\u4f5c\u4e3a\u5360\u4f4d\u7b26")),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"select * from user where username = ? and password = ?\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u83b7\u53d6conn.preparedStatement(String sql)")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u7ed9?\u8d4b\u503c\uff1a"),Object(l.b)("p",{parentName:"li"},"preparedStatement.setXXX;\n\u53c2\u65701\uff1a \uff1f\u7684\u4f4d\u7f6e\u7f16\u53f7\uff0c\u4ece1\u5f00\u59cb\n\u53c2\u65702\uff1a \uff1f\u7684\u503c")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u6267\u884csql\uff0c\u4e0d\u9700\u8981\u4f20\u9012sql\u8bed\u53e5")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u5904\u7406\u7ed3\u679c")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u91ca\u653e\u8d44\u6e90"))))))),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'/***\n * \u4f7f\u7528PreparedStatement\u5b8c\u6210\u767b\u5f55\n */\npublic class Demo05preparedStatementLogin {\n    /***\n     * \u9a8c\u8bc1\u662f\u5426\u767b\u5f55\u6210\u529f\n     * @param username \u7528\u6237\u540d\n     * @param password \u5bc6\u7801\n     * @return \u7ed3\u679c\n     */\n    public static boolean login(String username, String password) {\n        if (username == null || password == null) {\n            return false;\n        }\n\n        Connection conn = null;\n        PreparedStatement pStatement = null;\n        ResultSet rs = null;\n        boolean resultFlag = false;\n\n        try {\n            //1. \u6ce8\u518c\u9a71\u52a8\n            //2. \u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u5bf9\u8c61\n            conn = JDBCUtils.getConnection();\n\n//            3. \u6ce8\u610f\uff1asql\u7684\u53c2\u6570\u4f7f\u7528?\u4f5c\u4e3a\u5360\u4f4d\u7b26\n            String sql = "select * from user where username = ? and password = ?";\n\n//            4. \u83b7\u53d6conn.preparedStatement(String sql)\n            pStatement = conn.prepareStatement(sql);\n\n//            5. \u7ed9?\u8d4b\u503c\uff1a\n//            preparedStatement.setXXX;\n//            \u53c2\u65701\uff1a \uff1f\u7684\u4f4d\u7f6e\u7f16\u53f7\uff0c\u4ece1\u5f00\u59cb\n//            \u53c2\u65702\uff1a\uff1f\u7684\u503c\n            pStatement.setString(1, username);\n            pStatement.setString(2, password);\n\n//            6. \u6267\u884csql\uff0c\u4e0d\u9700\u8981\u4f20\u9012sql\u8bed\u53e5\n            ResultSet resultSet = pStatement.executeQuery();\n\n//            7. \u5904\u7406\u7ed3\u679c\n            while (resultSet.next()) {\n                int id = resultSet.getInt(1);\n                String sName = resultSet.getString(2);\n                String sPass = resultSet.getString(3);\n                System.out.println("\u7528\u6237id\uff1a" + id + " \u7528\u6237\u540d\uff1a" + sName + " \u5bc6\u7801:" + sPass);\n                resultFlag = true;\n            }\n\n            return resultFlag;\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            JDBCUtils.close(rs, pStatement, conn);\n        }\n\n        return false;\n    }\n\n    public static void main(String[] args) {\n        //\u952e\u76d8\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\n        Scanner sc = new Scanner(System.in);\n        System.out.println("\u8bf7\u8f93\u5165\u7528\u6237\u540d");\n        String username = sc.nextLine();\n        System.out.println("\u8bf7\u8f93\u5165\u5bc6\u7801");\n        String password = sc.nextLine();\n\n        //\u8c03\u7528\u65b9\u6cd5\uff0c\u83b7\u53d6\u7ed3\u679c\n        boolean result = login(username, password);\n\n        //\u5224\u65ad\u7ed3\u679c\n        if (result) {\n            System.out.println("\u767b\u5f55\u6210\u529f");\n        } else {\n            System.out.println("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");\n        }\n    }\n}\n')))),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a"),"\u4f7f\u7528PreparedStatement\u5b8c\u6210\u589e\u5220\u6539\u67e5\u7684\u6240\u6709\u64cd\u4f5c"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u9632\u6b62SQL\u6ce8\u5165"),Object(l.b)("li",{parentName:"ul"},"\u6548\u7387\u66f4\u9ad8")),Object(l.b)("h1",{id:"jdbc-dao----jdbc-utils"},"JDBC DAO  /  JDBC Utils"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u6ce8\u518c\u9a71\u52a8")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u62bd\u53d6\u4e00\u4e2a\u65b9\u6cd5\u83b7\u53d6\u8fde\u63a5\u5bf9\u8c61"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u83b7\u53d6\u8fde\u63a5,\u4e0d\u60f3\u4f20\u9012\u53c2\u6570\uff0c\u8fd8\u60f3\u4fdd\u6301\u5de5\u5177\u7c7b\u7684\u901a\u7528\u6027\uff0c\u91c7\u7528\u914d\u7f6e\u6587\u4ef6")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u627e\u4e0d\u5230\u8def\u5f84\uff1a\u7528ClassLoader\n\u53ef\u4ee5\u52a0\u8f7d\u5b57\u8282\u7801\u6587\u4ef6\u8fdb\u5185\u5b58\uff0c\u53ef\u4ee5\u8bbf\u95eesrc\u4e0b\u7684\u8d44\u6e90"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'static {\n    Properties properties = new Properties();\n    try {\n        //            properties.load(new FileInputStream(new File("src/jdbc/jdbc.properties")));\n        //            properties.load(new FileReader("src/jdbc/jdbc.properties"));\n        //\u83b7\u53d6\u7c7b\u52a0\u8f7d\u5668\n\n        ClassLoader classLoader = JDBCUtils.class.getClassLoader();\n        //\u4ee5src\u4e3a\u76f8\u5bf9\u6839\u8def\u5f84\n        URL resource = classLoader.getResource("jdbc/jdbc.properties");\n        String path = resource.getPath();\n        System.out.println(path);\n\n        properties.load(new FileReader(path));\n        url = properties.getProperty("url");\n        userName = properties.getProperty("user");\n        password = properties.getProperty("password");\n        driver = properties.getProperty("driver");\n        System.out.println(url + "  |  " + userName + "  |  " + password + "  |  " + driver);\n        Class.forName(driver);\n    } catch (ClassNotFoundException | FileNotFoundException e) {\n        e.printStackTrace();\n    } catch (IOException e) {\n        e.printStackTrace();\n    }\n}\n')))))),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"\u62bd\u53d6\u4e00\u4e2a\u65b9\u6cd5\u91ca\u653e\u8d44\u6e90")),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"/***\n* \u91ca\u653e\u8d44\u6e90\n* @return \u8d44\u6e90\n*/\npublic static void close(Statement statement, Connection conn) {\n    if (statement != null) {\n        try {\n            statement.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n\n    if (conn != null) {\n        try {\n            conn.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\npublic static void close(ResultSet rs, Statement statement, Connection conn) {\n    if (rs != null) {\n        try {\n            rs.close();\n        } catch (SQLException e) {\n            e.printStackTrace();\n        }\n    }\n\n    close(statement, conn);\n}\n")),Object(l.b)("h1",{id:"\u7ec3\u4e60"},"\u7ec3\u4e60"),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"\u901a\u8fc7\u952e\u76d8\u5f55\u5165\u7528\u6237\u540d\u5bc6\u7801"),Object(l.b)("li",{parentName:"ol"},'\u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\u6210\u529f\nSELECT * FROM user WHERE username="" and password="";\n\u5982\u679c\u6709\u67e5\u8be2\u7ed3\u679c\uff0c\u767b\u5f55\u6210\u529f;\u6ca1\u6709\u7ed3\u679c\u767b\u5f55\u5931\u8d25')),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6b65\u9aa4\uff1a")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u521b\u5efa\u7528\u6237\u8868"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-sql"}),"CREATE TABLE USER(\n    id INT PRIMARY KEY AUTO_INCREMENT,\n    username VARCHAR(32),\n    PASSWORD VARCHAR(32)\n);\n\nINSERT INTO USER VALUE(NULL,'root','root')\nINSERT INTO USER VALUE(NULL,'root1','root1')\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u521b\u5efa\u4e00\u4e2a\u7c7b\uff0c\u63d0\u4f9b\u767b\u5f55\u65b9\u6cd5"))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'package jdbc;\n\nimport org.junit.Test;\n\nimport java.sql.Connection;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.Scanner;\n\n/***\n * 1. \u901a\u8fc7\u952e\u76d8\u5f55\u5165\u7528\u6237\u540d\u5bc6\u7801\n * 2. \u5224\u65ad\u7528\u6237\u662f\u5426\u767b\u5f55\u6210\u529f\n */\npublic class Demo04LoginPractice {\n\n    /***\n     * \u9a8c\u8bc1\u662f\u5426\u767b\u5f55\u6210\u529f\n     * @param username \u7528\u6237\u540d\n     * @param password \u5bc6\u7801\n     * @return \u7ed3\u679c\n     */\n    public static boolean login(String username, String password) {\n        if (username == null || password == null) {\n            return false;\n        }\n\n        Connection conn = null;\n        Statement statement = null;\n        ResultSet rs = null;\n\n        try {\n            //\u8fde\u63a5\u6570\u636e\u5e93\uff0c\u5224\u65ad\u662f\u5426\u767b\u5f55\u6210\u529f\n            conn = JDBCUtils.getConnection();\n\n            //\u5b9a\u4e49sql\n            String sql = "SELECT * FROM user WHERE username=\'" + username +\n                    "\' AND password=\'" + password + "\'";\n            System.out.println(sql);\n\n            //\u83b7\u53d6statement\n            statement = conn.createStatement();\n\n            //\u6267\u884csql\n            rs = statement.executeQuery(sql);\n\n            //\u5224\u65ad\u7ed3\u679c\u96c6\u6709\u6ca1\u6709\u6570\u636e\n            return rs.next();\n\n        } catch (SQLException e) {\n            e.printStackTrace();\n        } finally {\n            JDBCUtils.close(rs, statement, conn);\n        }\n\n        return false;\n    }\n\n    public static void main(String[] args) {\n        //\u952e\u76d8\u8f93\u5165\u7528\u6237\u540d\u5bc6\u7801\n        Scanner sc = new Scanner(System.in);\n        System.out.println("\u8bf7\u8f93\u5165\u7528\u6237\u540d");\n        String username = sc.nextLine();\n        System.out.println("\u8bf7\u8f93\u5165\u5bc6\u7801");\n        String password = sc.next();\n\n        //\u8c03\u7528\u65b9\u6cd5\uff0c\u83b7\u53d6\u7ed3\u679c\n        boolean result = login(username, password);\n\n        //\u5224\u65ad\u7ed3\u679c\n        if(result){\n            System.out.println("\u767b\u5f55\u6210\u529f");\n        }else{\n            System.out.println("\u7528\u6237\u540d\u6216\u5bc6\u7801\u9519\u8bef");\n        }\n    }\n}\n')),Object(l.b)("h1",{id:"jdbc\u63a7\u5236\u4e8b\u52a1"},"JDBC\u63a7\u5236\u4e8b\u52a1"),Object(l.b)("p",null,"\u4f7f\u7528Connection\u5bf9\u8c61\u7ba1\u7406\u4e8b\u52a1\nsetAutoCommit\ncomit\nrollback"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'/***\n * JDBC\u4e8b\u52a1\n */\npublic class Demo06JDBCTransaction {\n\n    public static void main(String[] args) {\n        Connection conn = null;\n        PreparedStatement pStatement1 = null;\n        PreparedStatement pStatement2 = null;\n\n        try {\n            //1.\u83b7\u53d6\u8fde\u63a5\u5bf9\u8c61\n            conn = JDBCUtils.getConnection();\n\n            /*\u5f00\u542f\u4e8b\u52a1,\u5173\u95ed\u81ea\u52a8\u63d0\u4ea4*/\n            conn.setAutoCommit(false);\n\n            //2.\u5b9a\u4e49sql\n            //2.1   \u5f20\u4e09 -500\n            String sql1 = "update user set money = money - ? where id = ?";\n            //2.2   \u674e\u56db +500\n            String sql2 = "update user set money = money + ? where id = ?";\n\n            //3.\u83b7\u53d6\u6267\u884csql\u5bf9\u8c61\n            pStatement1 = conn.prepareStatement(sql1);\n            pStatement2 = conn.prepareStatement(sql2);\n\n            //4.\u8bbe\u7f6e\u53c2\u6570\n            pStatement1.setInt(1, 500);\n            pStatement1.setInt(2, 1);\n            pStatement2.setInt(1, 500);\n            pStatement2.setInt(2, 2);\n\n            pStatement1.executeUpdate();\n            //\u4eba\u4e3a\u5236\u9020\u5f02\u5e38\n            int i = 3 / 0;\n            pStatement2.executeUpdate();\n\n            /*\u63d0\u4ea4\u4e8b\u52a1*/\n            conn.commit();\n\n            //\u6293Exception\n        } catch (Exception e) {\n            /*\u4e8b\u52a1\u56de\u6eda*/\n            try {\n                if (conn != null){\n                    conn.rollback();\n                }\n            } catch (SQLException ex) {\n                ex.printStackTrace();\n            }\n            e.printStackTrace();\n        } finally {\n            JDBCUtils.close(pStatement1, conn);\n            JDBCUtils.close(pStatement2, null);\n        }\n    }\n}\n')),Object(l.b)("h1",{id:"\u6570\u636e\u5e93\u8fde\u63a5\u6c60"},"\u6570\u636e\u5e93\u8fde\u63a5\u6c60"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},Object(l.b)("strong",{parentName:"p"},"\u6982\u5ff5\uff1a"),"\u4e00\u4e2a\u5bb9\u5668(\u96c6\u5408)\uff0c\u5b58\u653e\u6570\u636e\u5e93\u8fde\u63a5\u7684\u5bb9\u5668\n\u5f53\u7cfb\u7edf\u521d\u59cb\u5316\u4ee5\u540e\uff0c\u5bb9\u5668\u88ab\u521b\u5efa\uff0c\u7533\u8bf7\u4e86\u4e00\u4e9b\u8fde\u63a5\u5bf9\u8c61\uff0c\u5f53\u7528\u6237\u8bbf\u95ee\u6570\u636e\u5e93\u65f6\uff0c\u4ece\u5bb9\u5668\u4e2d\u83b7\u53d6\u8fde\u63a5\u5bf9\u8c61\uff0c\u7528\u6237\u8bbf\u95ee\u5b8c\u540e\uff0c\u5f52\u8fd8\u8fde\u63a5\u5bf9\u8c61\u7ed9\u8fde\u63a5\u6c60")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u4f18\u70b9\uff1a"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"\u8282\u7ea6\u8d44\u6e90"),Object(l.b)("li",{parentName:"ul"},"\u7528\u6237\u8bbf\u95ee\u9ad8\u6548"))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u5b9e\u73b0\uff1a\nDataSource\u63a5\u53e3 -- \u6570\u636e\u6e90/\u8fde\u63a5\u6c60\n\u4e00\u4e2a\u8fde\u63a5\u5230\u8fd9\u4e2aDataSource\u5bf9\u8c61\u6240\u4ee3\u8868\u7684\u7269\u7406\u6570\u636e\u6e90\u5de5\u5382\nDataSource\u63a5\u53e3\u7531\u9a71\u52a8\u7a0b\u5e8f\u4f9b\u5e94\u5546\u5b9e\u73b0\uff1a"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u57fa\u672c\u5b9e\u73b0\uff1a\u751f\u6210\u6807\u51c6\u7684Connection\u5bf9\u8c61")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u8fde\u63a5\u6c60\u5b9e\u73b0\uff1a\u751f\u6210\u5c06\u81ea\u52a8\u53c2\u4e0e\u8fde\u63a5\u6c60\u7684Connection\u5bf9\u8c61\uff0c\u6b64\u5b9e\u73b0\u4e0e\u4e2d\u95f4\u5c42\u80fd\u8fde\u63a5\u6c60\u7ba1\u7406\u5668\u914d\u5408\u4f7f\u7528")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"\u5206\u5e03\u5f0f\u4e8b\u52a1\u5b9e\u73b0\uff1a\u751f\u6210\u53ef\u7528\u4e8e\u5206\u5e03\u5f0f\u4e8b\u52a1\u7684Connection\u5bf9\u8c61\uff0c\u5e76\u4e14\u51e0\u4e4e\u603b\u662f\u53c2\u4e0e\u8fde\u63a5\u6c60\u3002\u6b64\u5b9e\u73b0\u4e0e\u4e2d\u95f4\u5c42\u4e8b\u52a1\u7ba1\u7406\u5668\u4e00\u8d77\u5de5\u4f5c\uff0c\u5e76\u4e14\u51e0\u4e4e\u603b\u662f\u4f7f\u7528\u8fde\u63a5\u6c60\u7ba1\u7406\u5668"),Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"\u6807\u51c6\u63a5\u53e3\uff1ajavax.sql.DataSource.getConnection();")))))),Object(l.b)("ol",{start:2},Object(l.b)("li",{parentName:"ol"},"\u7531\u6570\u636e\u5e93\u5382\u5546\u5b9e\u73b0",Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"C3P0\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u6280\u672f"),Object(l.b)("li",{parentName:"ol"},"Druid\uff1a\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5b9e\u73b0\u6280\u672f\uff0c\u7531\u963f\u91cc\u5df4\u5df4\u63d0\u4f9b"),Object(l.b)("li",{parentName:"ol"},"\u65b9\u6cd5\uff1a",Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},"\u83b7\u53d6\u8fde\u63a5\uff1agetConnection()"),Object(l.b)("li",{parentName:"ul"},"\u5f52\u8fd8\u8fde\u63a5\uff1a\u5982\u679c\u8fde\u63a5\u5bf9\u8c61Connection\u662f\u4ece\u8fde\u63a5\u6c60\u4e2d\u83b7\u5f97\u7684\uff0c\u90a3\u4e48\u8c03\u7528Connection.close()\u65b9\u6cd5\uff0c\u5219\u4e0d\u4f1a\u518d\u5173\u95ed\u8fde\u63a5\uff0c\u800c\u662f\u5f52\u8fd8\u8fde\u63a5")))))),Object(l.b)("h2",{id:"c3p0"},"C3P0"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6b65\u9aa4\uff1a")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u5bfc\u5165jar\u5305"),Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"c3p0-0.9.5.2.jar"),Object(l.b)("li",{parentName:"ol"},"mchange-commons-java-0.2.12.jar"),Object(l.b)("li",{parentName:"ol"},"mysql\u9a71\u52a8"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\uff1a"),Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"\u540d\u79f0\uff1ac3p0.properties \u6216 c3p0-config.xml"),Object(l.b)("li",{parentName:"ol"},"\u8def\u5f84\uff1a\u7c7b\u8def\u5f84\uff0c\u6587\u4ef6\u76f4\u63a5\u653e\u5728src\u4e0b"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u521b\u5efa\u6838\u5fc3\u5bf9\u8c61\uff0c\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5bf9\u8c61",Object(l.b)("strong",{parentName:"p"},"comboPooledDataSource"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u83b7\u53d6\u8fde\u63a5\uff1agetConnection()"))),Object(l.b)("h2",{id:"druid"},"Druid"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6b65\u9aa4\uff1a")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u5bfc\u5165jar\u5305 druid-1.0.9.jar")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6  ->  "),Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"properties")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u4efb\u610f\u540d\u79f0\uff0c\u4efb\u610f\u4f4d\u7f6e")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u83b7\u53d6\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5bf9\u8c61\uff1a\u901a\u8fc7\u5de5\u5382\u7c7b\u6765\u83b7\u53d6DruidDataSourceFactory")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u83b7\u53d6\u8fde\u63a5"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'public class Demo01Druid {\n\n    @Test\n    public void test1() throws Exception {\n        //1.\u5bfc\u5165jar\u5305\n        //2.\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\n\n        //3.\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\n        Properties properties = new Properties();\n        InputStream propertyStream = Demo01Druid.class.getClassLoader()\n                .getResourceAsStream("druid.properties");\n        properties.load(propertyStream);\n\n        //4.\u83b7\u53d6\u8fde\u63a5\u6c60\u5bf9\u8c61\n        DataSource dataSource = DruidDataSourceFactory.createDataSource(properties);\n\n        //5.\u83b7\u53d6\u94fe\u63a5\n        Connection conn = dataSource.getConnection();\n\n        System.out.println(conn);\n    }\n}\n')))))),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u5de5\u5177\u7c7b\uff1a")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},"DruidUtils"),Object(l.b)("li",{parentName:"ol"},"\u63d0\u4f9b\u9759\u6001\u4ee3\u7801\u5757\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\uff0c\u5e76\u4e14\u521d\u59cb\u5316\u8fde\u63a5\u6c60\u5bf9\u8c61"),Object(l.b)("li",{parentName:"ol"},"\u63d0\u4f9b\u65b9\u6cd5\uff1a",Object(l.b)("ol",{parentName:"li"},Object(l.b)("li",{parentName:"ol"},"\u83b7\u53d6\u94fe\u63a5\u7684\u65b9\u6cd5\uff1a\u901a\u8fc7\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u83b7\u53d6\u8fde\u63a5"),Object(l.b)("li",{parentName:"ol"},"\u91ca\u653e\u8d44\u6e90"),Object(l.b)("li",{parentName:"ol"},"\u83b7\u53d6\u8fde\u63a5\u6c60\u7684\u65b9\u6cd5")))),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'/***\n * Druid\u8fde\u63a5\u6c60\u5de5\u5177\u7c7b\n */\npublic class DruidUtils {\n    //1.\u5b9a\u4e49\u6210\u5458\u53d8\u91cf\uff0cDataSource\n    private static DataSource dataSource;\n\n    //2.\u5728\u9759\u6001\u4ee3\u7801\u5757\u4e2d\u5bf9\u6210\u5458\u53d8\u91cf\u8fdb\u884c\u521d\u59cb\u5316\n    static {\n\n        try {\n            //2.1.\u52a0\u8f7d\u914d\u7f6e\u6587\u4ef6\n            Properties properties = new Properties();\n            InputStream resourceAsStream = DruidUtils.class.getClassLoader()\n                    .getResourceAsStream("druid.properties");\n\n            properties.load(resourceAsStream);\n\n            //2.2.\u83b7\u53d6DataSource\n            dataSource = DruidDataSourceFactory.createDataSource(properties);\n\n        } catch (Exception e) {\n            e.printStackTrace();\n        }\n    }\n\n    /***\n     * \u83b7\u53d6\u8fde\u63a5\u7684\u65b9\u6cd5\n     */\n    public static Connection getConnection() throws SQLException {\n        return dataSource.getConnection();\n    }\n\n    /***\n     * \u91ca\u653e\u8d44\u6e90\n     */\n    public static void close(Statement statement, Connection conn) {\n        if (statement != null) {\n            try {\n                statement.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n\n        if (conn != null) {\n            try {\n                conn.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n    }\n\n    /***\n     * \u91ca\u653e\u8d44\u6e90\n     */\n    public static void close(ResultSet resultSet,\n                             Statement statement,\n                             Connection conn) {\n        if (resultSet != null) {\n            try {\n                resultSet.close();\n            } catch (SQLException e) {\n                e.printStackTrace();\n            }\n        }\n        close(statement, conn);\n    }\n\n    /***\n     * \u83b7\u53d6\u8fde\u63a5\u6c60\u5bf9\u8c61\n     */\n    public static DataSource getDataSource() {\n        return dataSource;\n    }\n}\n')),Object(l.b)("h1",{id:"spring-jdbctemplate"},"Spring JDBCTemplate"),Object(l.b)("p",null,"Spring\u6846\u67b6\u5bf9JDBC\u7684\u7b80\u5355\u5c01\u88c5\uff0c\u63d0\u4f9b\u4e86JDBCTemplate\u5bf9\u8c61\u7b80\u5316JDBC\u5f00\u53d1"),Object(l.b)("p",null,Object(l.b)("strong",{parentName:"p"},"\u6b65\u9aa4\uff1a")),Object(l.b)("ol",null,Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u5bfc\u5165jar\u5305")),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u521b\u5efajdbcTemplate\u5bf9\u8c61\u3002\u4f9d\u8d56\u4e8e\u6570\u636e\u6e90DataSource"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"JdbcTemplate template = new JdbcTemplate(DataSource ds);\n"))),Object(l.b)("li",{parentName:"ol"},Object(l.b)("p",{parentName:"li"},"\u8c03\u7528JdbcTemplate\u7684\u65b9\u6cd5\u6765\u5b8c\u6210CRUD\u64cd\u4f5c"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"update(): DML \u589e\u5220\u6539\u8bed\u53e5")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"queryForMap(): \u67e5\u8be2\u7ed3\u679c\u5c06\u7ed3\u679c\u96c6\u5c01\u88c5\u4e3aMap\u96c6\u5408")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"queryForList():\u67e5\u8be2\u7ed3\u679c\u5e76\u5c06\u7ed3\u679c\u96c6\u5c01\u88c5\u4e3aList\u96c6\u5408")),Object(l.b)("li",{parentName:"ul"},Object(l.b)("u",null,"**query():\u67e5\u8be2\u7ed3\u679c\uff0c\u5c06\u7ed3\u679c\u5c01\u88c5\u4e3aJava Bean**"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("u",null,"**\u53c2\u6570**"),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",{parentName:"ul"},Object(l.b)("u",null,"**RowMapper\u63a5\u53e3\uff1a BeanPropertyRowMapper\u5b9e\u73b0\u7c7b**"),Object(l.b)("u",null,"**\u5b8c\u6210\u6570\u636e\u5230Java Bean\u7684\u81ea\u52a8\u5c01\u88c5**"),Object(l.b)("pre",{parentName:"li"},Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),"//\u5b9a\u4e49\u597d\u7684\u6620\u5c04\u5668\uff0cBeanPropertyRowMapper<>(POJO.class),\u5b9e\u73b0\u4e86RowMapper\u63a5\u53e3\nList<JdbcUser> users = jdbcTemplate.query(sql,\n                new BeanPropertyRowMapper<JdbcUser>(JdbcUser.class));\n"))))))),Object(l.b)("li",{parentName:"ul"},Object(l.b)("p",{parentName:"li"},"queryForObject():\u67e5\u8be2\u7ed3\u679c\uff0c\u5c06\u7ed3\u679c\u5c01\u88c5\u4e3a\u5bf9\u8c61\n\u4e00\u822c\u7528\u4e8e\u805a\u5408\u51fd\u6570\u7684\u67e5\u8be2"))))),Object(l.b)("p",null,"\u4ee3\u7801\uff1a\u91cd\u8981\uff1a"),Object(l.b)("pre",null,Object(l.b)("code",Object(a.a)({parentName:"pre"},{className:"language-java"}),'***\n * JdbcTemplate\u5165\u95e8\u5b66\u4e60\n */\npublic class Demo1JdbcTemplate {\n\n    @Test\n    public void testbase() {\n        //1.\u5bfc\u5165jar\u5305 Spring -> Druid -> mysql\n        //2.\u521b\u5efaJdbcTemplate,\u4f20\u5165DataSource\u8fde\u63a5\u6c60\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(DruidUtils.getDataSource());\n\n        //3.sql\u8bed\u53e5\n        String sql = "update user set username = ? where id = ?";\n\n        //4.\u8c03\u7528\u65b9\u6cd5\n        int count = jdbcTemplate.update(sql, "\u738b\u4e94", 3);\n        System.out.println("\u5f71\u54cd\u6761\u76ee\u6570\uff1a" + count);\n    }\n\n    /***\n     * \u67e5\u8be2id=1\uff0c\u5c06\u5176\u5c01\u88c5\u4e3amap\u96c6\u5408\n     */\n    @Test\n    public void testMap() {\n        DataSource dataSource = DruidUtils.getDataSource();\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(dataSource);\n\n        String sql = "select * from user where id = ?";\n\n        Map<String, Object> map = jdbcTemplate.queryForMap(sql, 1);\n        System.out.println(map.get("id"));\n        System.out.println(map.get("username"));\n        System.out.println(map.get("password"));\n        System.out.println(map.get("money"));\n    }\n\n    /***\n     * \u67e5\u8be2\u6240\u6709\u8bb0\u5f55\uff0c\u5c06\u5176\u5c01\u88c5\u4e3alist\n     */\n    @Test\n    public void testList() {\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(DruidUtils.getDataSource());\n\n        String sql = "select * from user";\n\n        List<Map<String, Object>> mapList = jdbcTemplate.queryForList(sql);\n\n        Iterator<Map<String, Object>> iterator = mapList.iterator();\n        while (iterator.hasNext()) {\n            System.out.println(iterator.next());\n        }\n    }\n\n    /***\n     * \u67e5\u8be2\u6240\u6709\u8bb0\u5f55\uff0c\u5c06\u5176\u5c01\u88c5\u4e3auser\u5bf9\u8c61\n     */\n    @Test\n    public void testPojo() {\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(DruidUtils.getDataSource());\n\n        String sql = "select * from user";\n\n//        //\u81ea\u5b9e\u73b0RowMapper \u884c\u6620\u5c04\u5668\n//        List<JdbcUser> users = jdbcTemplate.query(sql, new RowMapper<JdbcUser>() {\n//            @Override\n//            public JdbcUser mapRow(ResultSet resultSet, int i) throws SQLException {\n//                JdbcUser user = new JdbcUser();\n//                user.setId(resultSet.getInt("id"));\n//                user.setUsername(resultSet.getString("username"));\n//                user.setPassword(resultSet.getString("password"));\n//                user.setMoney(resultSet.getInt("money"));\n//                return user;\n//            }\n//        });\n\n        //\u5b9a\u4e49\u597d\u7684\u6620\u5c04\u5668\uff0cBeanPropertyRowMapper<>(POJO.class),\u5b9e\u73b0\u4e86RowMapper\u63a5\u53e3\n        List<JdbcUser> users = jdbcTemplate.query(sql,\n                new BeanPropertyRowMapper<JdbcUser>(JdbcUser.class));\n\n        for (JdbcUser user : users) {\n            System.out.println(user);\n        }\n\n    }\n\n    /***\n     * \u67e5\u8be2\u603b\u8bb0\u5f55\u6570\n     */\n    @Test\n    public void testCount() {\n        JdbcTemplate jdbcTemplate = new JdbcTemplate(DruidUtils.getDataSource());\n\n        String sql = "select count(id) from user";\n\n        Integer i = jdbcTemplate.queryForObject(sql, Integer.class);\n\n        System.out.println(i);\n    }\n}\n')))}o.isMDXComponent=!0},472:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return j}));var a=n(0),r=n.n(a);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},l=Object.keys(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)n=l[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=r.a.createContext({}),o=function(e){var t=r.a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):b(b({},t),e)),n},s=function(e){var t=o(e.components);return r.a.createElement(i.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},u=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,l=e.originalType,c=e.parentName,i=p(e,["components","mdxType","originalType","parentName"]),s=o(n),u=a,j=s["".concat(c,".").concat(u)]||s[u]||m[u]||l;return n?r.a.createElement(j,b(b({ref:t},i),{},{components:n})):r.a.createElement(j,b({ref:t},i))}));function j(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var l=n.length,c=new Array(l);c[0]=u;var b={};for(var p in t)hasOwnProperty.call(t,p)&&(b[p]=t[p]);b.originalType=e,b.mdxType="string"==typeof e?e:a,c[1]=b;for(var i=2;i<l;i++)c[i]=n[i];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);