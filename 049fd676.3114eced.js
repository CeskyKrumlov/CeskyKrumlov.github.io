(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{336:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m}));var r=n(0),a=n.n(r);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),b=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=b(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},d=a.a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,o=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=b(n),d=r,m=u["".concat(o,".").concat(d)]||u[d]||s[d]||i;return n?a.a.createElement(m,l(l({ref:t},p),{},{components:n})):a.a.createElement(m,l({ref:t},p))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.a.createElement.apply(null,o)}return a.a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},379:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/4-0984acc596c2fc2d2779b6ec1e09a22f.gif"},380:function(e,t,n){"use strict";n.r(t),t.default=n.p+"assets/images/5-a6235ed6417ec69f618f25b8a3ead850.gif"},64:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return l})),n.d(t,"rightToc",(function(){return c})),n.d(t,"default",(function(){return b}));var r=n(2),a=n(6),i=(n(0),n(336)),o={id:"12.shiroLogin",title:"Shiro\u5b9e\u73b0\u767b\u5f55\u62e6\u622a",hide_title:!0},l={unversionedId:"springboot/12.shiroLogin",id:"springboot/12.shiroLogin",isDocsHomePage:!1,title:"Shiro\u5b9e\u73b0\u767b\u5f55\u62e6\u622a",description:"Shiro\u5b9e\u73b0\u767b\u5f55\u62e6\u622a",source:"@site/docs/springboot/12.Shiro\u767b\u5f55\u62e6\u622a.md",permalink:"/docs/springboot/12.shiroLogin",sidebar:"someSidebar",previous:{title:"SpirngBoot\u6574\u5408Shiro",permalink:"/docs/springboot/12.springbootShiro"},next:{title:"Shiro\u5b9e\u73b0\u7528\u6237\u8ba4\u8bc1",permalink:"/docs/springboot/12.shiroAuthentication"}},c=[{value:"Shiro\u5b9e\u73b0\u767b\u5f55\u62e6\u622a",id:"shiro\u5b9e\u73b0\u767b\u5f55\u62e6\u622a",children:[{value:"\u73af\u5883\u642d\u5efa",id:"\u73af\u5883\u642d\u5efa",children:[]},{value:"\u6dfb\u52a0\u8fc7\u6ee4\u5668",id:"\u6dfb\u52a0\u8fc7\u6ee4\u5668",children:[]},{value:"\u5b9e\u73b0\u767b\u5f55\u62e6\u622a",id:"\u5b9e\u73b0\u767b\u5f55\u62e6\u622a",children:[]}]}],p={rightToc:c};function b(e){var t=e.components,o=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(r.a)({},p,o,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h1",{id:"shiro\u5b9e\u73b0\u767b\u5f55\u62e6\u622a"},"Shiro\u5b9e\u73b0\u767b\u5f55\u62e6\u622a"),Object(i.b)("h2",{id:"\u73af\u5883\u642d\u5efa"},"\u73af\u5883\u642d\u5efa"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u524d\u7aef\u9875\u9762",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"add.ftl"),"\u2014\u2014\u6dfb\u52a0\u7528\u6237"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"update.ftl"),"\u2014\u2014\u4fee\u6539\u7528\u6237"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"login.ftl"),"\u2014\u2014\u767b\u5f55\u9875\u9762")))),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>\u589e\u52a0\u4e00\u4e2a\u7528\u6237</title>\n</head>\n<body>\n<h1>\u6dfb\u52a0</h1><br>\n\n</body>\n</html>\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>\u4fee\u6539\u4e00\u4e2a\u7528\u6237</title>\n</head>\n<body>\n    <h1>\u4fee\u6539\u7528\u6237</h1><br>\n</body>\n</html>\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>\u767b\u5f55</title>\n</head>\n<body>\n<h1>\u767b\u5f55</h1><br>\n<form action="" method="post">\n    <p> \u7528\u6237\u540d\uff1a<input type="text" name="username"/></p>\n    <p> \u5bc6\u7801\uff1a<input type="password" name="password"/></p>\n    <p><input type="submit" value="\u767b\u5f55"></p>\n</form>\n</body>\n</html>\n')),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u5728\u9996\u9875\u6dfb\u52a0\u8df3\u8f6c\u8d85\u94fe\u63a5")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-html"}),'<!DOCTYPE html>\n<html lang="en">\n<head>\n    <meta charset="UTF-8">\n    <title>Title</title>\n</head>\n<body>\n\u9996\u9875\n<hr>\n<a href="/user/add">add</a> | <a href="/user/update">update</a>\n</body>\n</html>\n')),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"Controller\u6dfb\u52a0\u8def\u7531")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-java"}),'@Controller\npublic class HelloController {\n\n    @RequestMapping({"/index", "/"})\n    public String toIndex(Model model) {\n        model.addAttribute("msg", "Hello shiro _ freemarker");\n        return "index";\n    }\n\n    @RequestMapping("/user/add")\n    public String add() {\n        return "user/add";\n    }\n\n    @RequestMapping("/user/update")\n    public String update() {\n        return "user/update";\n    }\n    \n    @RequestMapping("/user/toLogin")\n    public String toLogin(){\n        return "user/login";\n    }\n}\n')),Object(i.b)("h2",{id:"\u6dfb\u52a0\u8fc7\u6ee4\u5668"},"\u6dfb\u52a0\u8fc7\u6ee4\u5668"),Object(i.b)("p",null,"\u5728",Object(i.b)("inlineCode",{parentName:"p"},"Shiro\u914d\u7f6e\u7c7b"),"\u7684",Object(i.b)("inlineCode",{parentName:"p"},"ShrioFilterFactoryBean"),"\u4e2d\u6dfb\u52a0\u8fc7\u6ee4\u5668"),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"\u53ef\u4ee5\u6dfb\u52a0\u7684\u8fc7\u6ee4\u5668\uff1a")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"anon\uff1a"),"\u65e0\u9700\u8ba4\u771f\uff0c\u76f4\u63a5\u53ef\u4ee5\u8bbf\u95ee"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"authc\uff1a"),"\u5fc5\u987b\u8ba4\u8bc1\u624d\u80fd\u8bbf\u95ee"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"user\uff1a"),'\u5fc5\u987b\u7528\u6237"\u8bb0\u4f4f\u6211"\u529f\u80fd\u624d\u80fd\u7528'),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"perms\uff1a"),"\u62e5\u6709\u5bf9\u67d0\u4e2a\u8d44\u6e90\u7684\u6743\u9650\uff0c\u624d\u80fd\u8bbf\u95ee"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("strong",{parentName:"li"},"role\uff1a"),"\u62e5\u6709\u67d0\u4e2a\u89d2\u8272\u6743\u9650\u624d\u53ef\u4ee5\u8bbf\u95ee")),Object(i.b)("p",null,Object(i.b)("strong",{parentName:"p"},"\u901a\u8fc7\u5728",Object(i.b)("inlineCode",{parentName:"strong"},"filterChainDefinitionMap"),"\u4e2d\u6dfb\u52a0\u89c4\u5219\u6765\u5b9e\u73b0\u8fc7\u6ee4")),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u652f\u6301\u901a\u914d\u7b26\u5199\u6cd5\n",Object(i.b)("inlineCode",{parentName:"li"},'filterChainDefinitionMap.put("/user/*", "authc")'))),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-java"}),'//shiroFilterFactoryBean\n@Bean\npublic ShiroFilterFactoryBean getShiroFilterFactoryBean(DefaultSecurityManager defaultSecurityManager) {\n    ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean();\n    shiroFilterFactoryBean.setSecurityManager(defaultSecurityManager);\n\n    Map<String, String> filterChainDefinitionMap = new LinkedHashMap<>();\n    //\u8ba9/user/add\u8def\u7531\u80fd\u88ab\u6240\u6709\u4eba\u8bbf\u95ee\n    filterChainDefinitionMap.put("/user/add", "anon");\n    //\u8ba4\u8bc1\u8fc7\u540e\u624d\u5141\u8bb8\u8bbf\u95ee/user/update\n    filterChainDefinitionMap.put("/user/update", "authc");\n    //filterChainDefinitionMap.put("/user/*", "authc")\n    shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);\n\n    return shiroFilterFactoryBean;\n}\n')),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(r.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(r.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(r.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"info")),Object(i.b)("div",Object(r.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"\u73b0\u5728\u4efb\u4f55\u4eba\u90fd\u53ef\u4ee5\u6dfb\u52a0\u65b0\u7528\u6237\uff0c\u4f46\u4fee\u8fc7\u7528\u6237\u5fc5\u987b\u7ecf\u8fc7\u9a8c\u8bc1"))),Object(i.b)("p",null,Object(i.b)("img",{src:n(379).default})),Object(i.b)("h2",{id:"\u5b9e\u73b0\u767b\u5f55\u62e6\u622a"},"\u5b9e\u73b0\u767b\u5f55\u62e6\u622a"),Object(i.b)("p",null,"\u73b0\u5728\u53ef\u4ee5\u5728",Object(i.b)("inlineCode",{parentName:"p"},"shiroFilterFactoryBean"),"\u4e2d\u8bbe\u7f6e\u767b\u5f55\u9875URL\uff0c\u8fd9\u6837\uff0c\u4e0a\u9762\u7684",Object(i.b)("inlineCode",{parentName:"p"},"/user/update"),"\u8bf7\u6c42\u88ab\u62e6\u622a\u65f6\u5c31\u4e0d\u518d\u62a5\u9519\uff0c\u800c\u662f",Object(i.b)("strong",{parentName:"p"},"\u8df3\u8f6c\u5230\u6211\u4eec\u6307\u5b9a\u7684\u767b\u5f55\u8def\u7531")),Object(i.b)("pre",null,Object(i.b)("code",Object(r.a)({parentName:"pre"},{className:"language-java"}),'//shiroFilterFactoryBean\n@Bean\npublic ShiroFilterFactoryBean getShiroFilterFactoryBean(DefaultSecurityManager defaultSecurityManager) {\n    ShiroFilterFactoryBean shiroFilterFactoryBean = new ShiroFilterFactoryBean();\n    shiroFilterFactoryBean.setSecurityManager(defaultSecurityManager);\n\n    Map<String, String> filterChainDefinitionMap = new LinkedHashMap<>();\n    //\u8ba9/user/add\u8def\u7531\u80fd\u88ab\u6240\u6709\u4eba\u8bbf\u95ee\n    filterChainDefinitionMap.put("/user/add", "anon");\n    //\u8ba4\u8bc1\u8fc7\u540e\u624d\u5141\u8bb8\u8bbf\u95ee/user/update\n    filterChainDefinitionMap.put("/user/update", "authc");\n    shiroFilterFactoryBean.setFilterChainDefinitionMap(filterChainDefinitionMap);\n    //\u8bbe\u7f6e\u767b\u5f55\u8def\u7531\n    shiroFilterFactoryBean.setLoginUrl("/user/toLogin");\n\n    return shiroFilterFactoryBean;\n}\n')),Object(i.b)("p",null,Object(i.b)("img",{src:n(380).default})))}b.isMDXComponent=!0}}]);