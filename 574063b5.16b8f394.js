(window.webpackJsonp=window.webpackJsonp||[]).push([[165],{221:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return c})),t.d(n,"default",(function(){return m}));var o=t(2),a=t(6),i=(t(0),t(565)),r=t(569),u=t(570),l={id:"7.springbootRabbit",title:"SpringBoot \u6574\u5408 RabbitMQ",hide_title:!0},s={unversionedId:"\u6d88\u606f\u4e2d\u95f4\u4ef6/rabbitmq/7.springbootRabbit",id:"\u6d88\u606f\u4e2d\u95f4\u4ef6/rabbitmq/7.springbootRabbit",isDocsHomePage:!1,title:"SpringBoot \u6574\u5408 RabbitMQ",description:"SpringBoot \u6574\u5408 RabbitMQ",source:"@site/docs/\u6d88\u606f\u4e2d\u95f4\u4ef6/rabbitmq/springboot_rabbit.md",slug:"/\u6d88\u606f\u4e2d\u95f4\u4ef6/rabbitmq/7.springbootRabbit",permalink:"/docs/\u6d88\u606f\u4e2d\u95f4\u4ef6/rabbitmq/7.springbootRabbit",version:"current",sidebar:"someSidebar",previous:{title:"Routing Topic \u6a21\u5f0f",permalink:"/docs/\u6d88\u606f\u4e2d\u95f4\u4ef6/rabbitmq/6.topicModel"},next:{title:"RabbitMQ \u5e94\u7528\u573a\u666f",permalink:"/docs/\u6d88\u606f\u4e2d\u95f4\u4ef6/rabbitmq/8.realApplication"}},c=[{value:"SpringBoot \u6574\u5408 RabbitMQ",id:"springboot-\u6574\u5408-rabbitmq",children:[]},{value:"Hello Wolrd",id:"hello-wolrd",children:[{value:"\u6d88\u8d39\u8005",id:"\u6d88\u8d39\u8005",children:[]},{value:"\u751f\u4ea7\u8005",id:"\u751f\u4ea7\u8005",children:[]}]},{value:"Work \u6a21\u578b",id:"work-\u6a21\u578b",children:[{value:"\u751f\u4ea7\u8005",id:"\u751f\u4ea7\u8005-1",children:[]},{value:"\u6d88\u8d39\u8005",id:"\u6d88\u8d39\u8005-1",children:[]}]},{value:"Fanout \u6a21\u578b",id:"fanout-\u6a21\u578b",children:[{value:"\u751f\u4ea7\u8005",id:"\u751f\u4ea7\u8005-2",children:[]},{value:"\u6d88\u8d39\u8005",id:"\u6d88\u8d39\u8005-2",children:[]}]},{value:"RoutingDirect \u6a21\u5f0f",id:"routingdirect-\u6a21\u5f0f",children:[{value:"\u751f\u4ea7\u8005",id:"\u751f\u4ea7\u8005-3",children:[]},{value:"\u6d88\u8d39\u8005",id:"\u6d88\u8d39\u8005-3",children:[]}]},{value:"RoutingTopic \u6a21\u5f0f",id:"routingtopic-\u6a21\u5f0f",children:[{value:"\u751f\u4ea7\u8005",id:"\u751f\u4ea7\u8005-4",children:[]},{value:"\u6d88\u8d39\u8005",id:"\u6d88\u8d39\u8005-4",children:[]}]}],b={rightToc:c};function m(e){var n=e.components,t=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},b,t,{components:n,mdxType:"MDXLayout"}),Object(i.b)("br",null),Object(i.b)("h1",{id:"springboot-\u6574\u5408-rabbitmq"},"SpringBoot \u6574\u5408 RabbitMQ"),Object(i.b)(r.a,{defaultValue:"1",values:[{label:"maven \u4f9d\u8d56",value:"1"},{label:"application.yaml",value:"2"}],mdxType:"Tabs"},Object(i.b)(u.a,{value:"1",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-xml"}),"<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-amqp</artifactId>\n    <version>2.2.2.RELEASE</version>\n</dependency>\n"))),Object(i.b)(u.a,{value:"2",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-yaml"}),"spring:\n  application:\n    name: sringboot_rabbitmq\n  rabbitmq:\n    host: 127.0.0.1\n    port: 5672\n    username: flute\n    password: flute\n    virtual-host: /flute\n")))),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("strong",{parentName:"p"},"\u901a\u8fc7 Spring \u5bb9\u5668\u83b7\u53d6 ",Object(i.b)("inlineCode",{parentName:"strong"},"RabbitTemplate")," \u5373\u53ef"))),Object(i.b)("br",null),Object(i.b)("h1",{id:"hello-wolrd"},"Hello Wolrd"),Object(i.b)("h2",{id:"\u6d88\u8d39\u8005"},"\u6d88\u8d39\u8005"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u4ea4\u7ed9 Spring \u5bb9\u5668\u7ba1\u7406"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"@RabbitListener")," \u6ce8\u89e3\uff0c\u8868\u660e\u8fd9\u662f\u4e00\u4e2a\u6d88\u8d39\u8005\uff0c",Object(i.b)("inlineCode",{parentName:"li"},"queuesToDeclare")," \u58f0\u660e\u4e00\u4e2a\u961f\u5217\uff0c",Object(i.b)("inlineCode",{parentName:"li"},"@Queue")," \u6307\u5b9a\u961f\u5217\u7684\u5404\u79cd\u5c5e\u6027\uff0c\u9ed8\u8ba4\u5c5e\u6027\u4e3a ",Object(i.b)("inlineCode",{parentName:"li"},"\u961f\u5217\u540d\u79f0"),"\uff0c\u8fd8\u53ef\u4ee5\u8bbe\u7f6e ",Object(i.b)("inlineCode",{parentName:"li"},"\u6301\u4e45\u5316"),"\u3001",Object(i.b)("inlineCode",{parentName:"li"},"\u81ea\u52a8\u5220\u9664")," \u7b49"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"@RabbitHandler")," \u6307\u660e\u6d88\u8d39\u6d88\u606f\u7684\u65b9\u6cd5\uff0c\u4e4b\u540e\u53c2\u6570\u5217\u8868\u53ef\u4ee5\u76f4\u63a5\u63a5\u53d7\u5230\u6d88\u606f")),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'@Component\n@RabbitListener(queuesToDeclare = @Queue("hello")) // \u58f0\u660e\u961f\u5217\npublic class ConsumerHello {\n\n    @RabbitHandler // \u83b7\u53d6\u6d88\u606f\n    public void receive(String message) {\n        System.out.println("message = " + message);\n    }\n}\n')),Object(i.b)("h2",{id:"\u751f\u4ea7\u8005"},"\u751f\u4ea7\u8005"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"\u4f7f\u7528 ",Object(i.b)("inlineCode",{parentName:"li"},"RabbitTemplate")," \u6765\u53d1\u9001\u6d88\u606f"),Object(i.b)("li",{parentName:"ul"},"\u5728 SpringBootTest \u4e2d\u8fdb\u884c\u6d4b\u8bd5")),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'@SpringBootTest(classes = MainClass.class)\n@RunWith(SpringRunner.class)\npublic class TestRabbitMQ {\n\n    @Autowired\n    RabbitTemplate rabbitTemplate;\n\n    //hello world model\n    @Test\n    public void helloWorldTest() {\n        // 1. routingKey  2. message Object\n        rabbitTemplate.convertAndSend("hello","hello world message");\n    }\n}\n')),Object(i.b)("div",{className:"admonition admonition-info alert alert--info"},Object(i.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(o.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(o.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(o.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"\u63d0\u793a")),Object(i.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("ul",{parentName:"div"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u4f7f\u7528 JUnit \u5199\u7684\u751f\u4ea7\u8005\u4ee3\u7801\uff0c\u4e0d\u4f1a\u76f4\u63a5\u521b\u5efa\u961f\u5217\u3001\u4ea4\u6362\u673a\uff0c\u800c\u662f\u5728\u6267\u884c\u6d88\u8d39\u8005\u4ee3\u7801\u65f6\u624d\u521b\u5efa")),Object(i.b)("li",{parentName:"ul"},Object(i.b)("p",{parentName:"li"},"\u4f7f\u7528 main \u65b9\u6cd5\u5199\u7684\u751f\u4ea7\u8005\uff0c\u4f1a\u76f4\u63a5\u521b\u5efa\u961f\u5217\u3001\u4ea4\u6362\u673a"))))),Object(i.b)("br",null),Object(i.b)("h1",{id:"work-\u6a21\u578b"},"Work \u6a21\u578b"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},Object(i.b)("inlineCode",{parentName:"p"},"@RabbitListener")," \u65e2\u53ef\u4ee5\u7528\u5728\u7c7b\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u7528\u5728\u65b9\u6cd5\u4e0a")),Object(i.b)("h2",{id:"\u751f\u4ea7\u8005-1"},"\u751f\u4ea7\u8005"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'//work model\n@Test\npublic void workTest() {\n    // 1. routingKey  2. message Object\n    for (int i = 0; i < 10; i++)\n        rabbitTemplate.convertAndSend("work",\n                "work model message | index [" + i + "]");\n}\n')),Object(i.b)("h2",{id:"\u6d88\u8d39\u8005-1"},"\u6d88\u8d39\u8005"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"\u8bbe\u5b9a 2 \u4e2a\u6d88\u8d39\u8005\uff0c\u63a5\u6536\u540c\u4e00\u4e2a\u961f\u5217\u540d"),Object(i.b)("ul",{parentName:"blockquote"},Object(i.b)("li",{parentName:"ul"},"\u5728\u4e00\u4e2a\u7c7b\u4e2d\uff0c\u901a\u8fc7 ",Object(i.b)("inlineCode",{parentName:"li"},"@RabbitListener")," \u6ce8\u89e3\u6ce8\u91ca\u4e24\u4e2a\u65b9\u6cd5\u5b9e\u73b0"))),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java"}),'@Component\npublic class ConsumerWork {\n\n    @RabbitListener(queuesToDeclare = @Queue("work"))\n    public void receive1(String message) {\n        System.out.println("Work Consumer 1 => " + message);\n    }\n\n    @RabbitListener(queuesToDeclare = @Queue("work"))\n    public void receive2(String message) {\n        System.out.println("Work Consumer 2 => " + message);\n    }\n}\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u8fd0\u884c\u7ed3\u679c"',title:'"\u8fd0\u884c\u7ed3\u679c"'}),"Work Consumer 1 => work model message | index [1]\nWork Consumer 2 => work model message | index [0]\nWork Consumer 1 => work model message | index [3]\nWork Consumer 2 => work model message | index [2]\nWork Consumer 1 => work model message | index [5]\nWork Consumer 2 => work model message | index [4]\nWork Consumer 1 => work model message | index [7]\nWork Consumer 2 => work model message | index [6]\nWork Consumer 1 => work model message | index [9]\nWork Consumer 2 => work model message | index [8]\n")),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"\u4eba\u4e3a\u6392\u5e8f\u4e00\u4e0b")),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u4eba\u4e3a\u6392\u5e8f"',title:'"\u4eba\u4e3a\u6392\u5e8f"'}),"Work Consumer 2 => work model message | index [0]\nWork Consumer 1 => work model message | index [1]\nWork Consumer 2 => work model message | index [2]\nWork Consumer 1 => work model message | index [3]\nWork Consumer 2 => work model message | index [4]\nWork Consumer 1 => work model message | index [5]\nWork Consumer 2 => work model message | index [6]\nWork Consumer 1 => work model message | index [7]\nWork Consumer 2 => work model message | index [8]\nWork Consumer 1 => work model message | index [9]\n")),Object(i.b)("br",null),Object(i.b)("h1",{id:"fanout-\u6a21\u578b"},"Fanout \u6a21\u578b"),Object(i.b)("h2",{id:"\u751f\u4ea7\u8005-2"},"\u751f\u4ea7\u8005"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"\u5f80 ",Object(i.b)("inlineCode",{parentName:"p"},"logs")," \u4ea4\u6362\u673a\u4e2d\u53d1\u9001\u6d88\u606f\uff0c\u56e0\u6b64\u5148",Object(i.b)("strong",{parentName:"p"},"\u5220\u9664"),"\u4e4b\u524d ",Object(i.b)("strong",{parentName:"p"},"\u540d\u4e3a logs \u7684\u4ea4\u6362\u673a")),Object(i.b)("ul",{parentName:"blockquote"},Object(i.b)("li",{parentName:"ul"},"\u4f7f\u7528\u7684\u65b9\u6cd5\u53d1\u751f\u4e86\u91cd\u8f7d"))),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java",metastring:"{4}","{4}":!0}),'//fanout model\n@Test\npublic void fanoutTest() {\n    // 1. exchange  2. routingKey 3. message object\n    for (int i = 0; i < 10; i++)\n        rabbitTemplate.convertAndSend("logs",\n                "",\n                "Fanout model message | index [" + i + "]");\n}\n')),Object(i.b)("h2",{id:"\u6d88\u8d39\u8005-2"},"\u6d88\u8d39\u8005"),Object(i.b)("blockquote",null,Object(i.b)("ul",{parentName:"blockquote"},Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"@RabbitListener")," \u6ce8\u89e3\u4e2d\u4e0d\u518d\u4f7f\u7528 ",Object(i.b)("inlineCode",{parentName:"li"},"queuesToDeclare")," \u800c\u662f\u4f7f\u7528 ",Object(i.b)("inlineCode",{parentName:"li"},"bindings")," \u5b83\u63a5\u6536\u4e00\u4e2a ",Object(i.b)("inlineCode",{parentName:"li"},"QueueBingding[]")," \u6570\u7ec4",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"\u5176\u4e2d\u5199 ",Object(i.b)("inlineCode",{parentName:"li"},"@QueueBingding")," \u6ce8\u89e3\uff0c\u8868\u793a\u7ed1\u5b9a\u4ea4\u6362\u673a\u4e0e\u961f\u5217",Object(i.b)("ul",{parentName:"li"},Object(i.b)("li",{parentName:"ul"},"\u5176\u4e2d ",Object(i.b)("inlineCode",{parentName:"li"},"value")," \u5c5e\u6027\u6307\u5b9a\u961f\u5217\uff0c\u4f7f\u7528 ",Object(i.b)("inlineCode",{parentName:"li"},"@Queue")," \u58f0\u660e\u4e00\u4e2a\u961f\u5217\uff0c",Object(i.b)("strong",{parentName:"li"},"\u6b64\u5904",Object(i.b)("inlineCode",{parentName:"strong"},"@Queue")," \u4e0d\u6307\u5b9a\u540d\u79f0\uff0c\u8868\u793a\u751f\u6210\u4e00\u4e2a\u4e34\u65f6\u961f\u5217")),Object(i.b)("li",{parentName:"ul"},"\u5176\u4e2d ",Object(i.b)("inlineCode",{parentName:"li"},"exchange")," \u5c5e\u6027\u6307\u5b9a\u4ea4\u6362\u673a\uff0c\u4f7f\u7528 ",Object(i.b)("inlineCode",{parentName:"li"},"@Exchange(value, type)")," \u58f0\u660e\u4ea4\u6362\u673a "))))))),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java",metastring:"{5-8}","{5-8}":!0}),'@Component\npublic class ConsumerFanout {\n\n    // \u6d88\u8d39\u80051\n    @RabbitListener(bindings = {\n            @QueueBinding( // \u7ed1\u5b9a\u961f\u5217\u4e0e\u4ea4\u6362\u673a\n                    value = @Queue, // \u521b\u5efa\u4e34\u65f6\u961f\u5217\n                    exchange = @Exchange(value = "logs", type = ExchangeTypes.FANOUT)\n            )\n    })\n    public void receive1(String message) {\n        System.out.println("Fanout Consumer 1 => " + message);\n    }\n\n    // \u6d88\u8d39\u80052\n    @RabbitListener(bindings = {\n            @QueueBinding( // \u7ed1\u5b9a\u961f\u5217\u4e0e\u4ea4\u6362\u673a\n                    value = @Queue, // \u521b\u5efa\u4e34\u65f6\u961f\u5217\n                    exchange = @Exchange(value = "logs", type = ExchangeTypes.FANOUT)\n            )\n    })\n    public void receive2(String message) {\n        System.out.println("Fanout Consumer 2 => " + message);\n    }\n}\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u8fd0\u884c\u7ed3\u679c"',title:'"\u8fd0\u884c\u7ed3\u679c"'}),"Fanout Consumer 2 => Fanout model message | index [0]\nFanout Consumer 1 => Fanout model message | index [0]\nFanout Consumer 1 => Fanout model message | index [1]\nFanout Consumer 1 => Fanout model message | index [2]\nFanout Consumer 1 => Fanout model message | index [3]\nFanout Consumer 1 => Fanout model message | index [4]\nFanout Consumer 1 => Fanout model message | index [5]\nFanout Consumer 1 => Fanout model message | index [6]\nFanout Consumer 1 => Fanout model message | index [7]\nFanout Consumer 1 => Fanout model message | index [8]\nFanout Consumer 1 => Fanout model message | index [9]\n-------------------------------------------------------\nFanout Consumer 2 => Fanout model message | index [1]\nFanout Consumer 2 => Fanout model message | index [2]\nFanout Consumer 2 => Fanout model message | index [3]\nFanout Consumer 2 => Fanout model message | index [4]\nFanout Consumer 2 => Fanout model message | index [5]\nFanout Consumer 2 => Fanout model message | index [6]\nFanout Consumer 2 => Fanout model message | index [7]\nFanout Consumer 2 => Fanout model message | index [8]\nFanout Consumer 2 => Fanout model message | index [9]\n")),Object(i.b)("br",null),Object(i.b)("h1",{id:"routingdirect-\u6a21\u5f0f"},"RoutingDirect \u6a21\u5f0f"),Object(i.b)("blockquote",null,Object(i.b)("p",{parentName:"blockquote"},"\u5728 Fanout \u7684\u57fa\u7840\u4e0a\uff0c\u591a\u4e86 ",Object(i.b)("inlineCode",{parentName:"p"},"RoutingKey")),Object(i.b)("ul",{parentName:"blockquote"},Object(i.b)("li",{parentName:"ul"},"\u5728\u6d88\u8d39\u8005\u6ce8\u89e3\u4e2d\uff0c\u6dfb\u52a0 ",Object(i.b)("inlineCode",{parentName:"li"},"key")," \u5c5e\u6027\u5373\u53ef\uff0c\u5b83\u5c31\u6536\u4e00\u4e2a ",Object(i.b)("inlineCode",{parentName:"li"},"String[]")))),Object(i.b)("h2",{id:"\u751f\u4ea7\u8005-3"},"\u751f\u4ea7\u8005"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java",metastring:"{4,12}","{4,12}":!0}),'//Routing Direct model\n@Test\npublic void RoutingDirectTest() {\n    String routingKey = "info";\n    // 1. exchange  2. routingKey 3. message object\n    for (int i = 0; i < 5; i++)\n        rabbitTemplate.convertAndSend("directs",\n                routingKey,\n                "Routing Direct model message | RoutingKey [" + routingKey + "]");\n\n    // \u66f4\u6539\u8def\u7531\n    routingKey = "error";\n    for (int i = 0; i < 5; i++)\n        rabbitTemplate.convertAndSend("directs",\n                routingKey,\n                "Routing Direct model message | RoutingKey [" + routingKey + "]");\n}\n')),Object(i.b)("h2",{id:"\u6d88\u8d39\u8005-3"},"\u6d88\u8d39\u8005"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java",metastring:"{8,20}","{8,20}":!0}),'@Component\npublic class ConsumerRoutingDirect {\n    // \u63a5\u6536\u6240\u6709\u65e5\u5fd7\n    @RabbitListener(bindings = {\n            @QueueBinding(\n                    value = @Queue,\n                    exchange = @Exchange(value = "directs", type = ExchangeTypes.DIRECT),\n                    key = {"info", "error"}\n            )\n    })\n    public void receive1(String message) {\n        System.out.println("Routing Direct Consumer 1 => " + message);\n    }\n\n    // \u53ea\u63a5\u6536\u9519\u8bef\u65e5\u5fd7\n    @RabbitListener(bindings = {\n            @QueueBinding(\n                    value = @Queue,\n                    exchange = @Exchange(value = "directs", type = ExchangeTypes.DIRECT),\n                    key = {"error"}\n            )\n    })\n    public void receive2(String message) {\n        System.out.println("Routing Direct Consumer 2 => " + message);\n    }\n}\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u8fd0\u884c\u7ed3\u679c"',title:'"\u8fd0\u884c\u7ed3\u679c"'}),"Routing Direct Consumer 1 => Routing Direct model message | RoutingKey [info]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [info]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [info]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [info]\nRouting Direct Consumer 1 => Routing Direct model message | RoutingKey [info]\n---------------------------------------------------------------------------------\nRouting Direct Consumer 2 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 2 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 2 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 2 => Routing Direct model message | RoutingKey [error]\nRouting Direct Consumer 2 => Routing Direct model message | RoutingKey [error]\n")),Object(i.b)("br",null),Object(i.b)("h1",{id:"routingtopic-\u6a21\u5f0f"},"RoutingTopic \u6a21\u5f0f"),Object(i.b)("h2",{id:"\u751f\u4ea7\u8005-4"},"\u751f\u4ea7\u8005"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java",metastring:"{4,11}","{4,11}":!0}),'//Routing Topic model\n@Test\npublic void RoutingTopicTest() {\n    String routingKey = "user.save";\n    // 1. exchange  2. routingKey 3. message object\n    rabbitTemplate.convertAndSend("topics",\n            routingKey,\n            "Routing Topic model message | RoutingKey [" + routingKey + "]");\n\n    // \u66f4\u6539\u8def\u7531\n    routingKey = "user.save.1";\n    rabbitTemplate.convertAndSend("topics",\n            routingKey,\n            "Routing Topic model message | RoutingKey [" + routingKey + "]");\n}\n')),Object(i.b)("h2",{id:"\u6d88\u8d39\u8005-4"},"\u6d88\u8d39\u8005"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-java",metastring:"{8,19}","{8,19}":!0}),'@Component\npublic class ConsumerTopic {\n\n    @RabbitListener(bindings = {\n            @QueueBinding(\n                    value = @Queue,\n                    exchange = @Exchange(value = "topics",type = ExchangeTypes.TOPIC),\n                    key = {"user.*"}\n            )\n    })\n    public void receive1(String message) {\n        System.out.println("Routing Topic Consumer 1 => " + message);\n    }\n\n    @RabbitListener(bindings = {\n            @QueueBinding(\n                    value = @Queue,\n                    exchange = @Exchange(value = "topics",type = ExchangeTypes.TOPIC),\n                    key = {"user.#"}\n            )\n    })\n    public void receive2(String message) {\n        System.out.println("Routing Topic Consumer 2 => " + message);\n    }\n}\n')),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-js",metastring:'title="\u8fd0\u884c\u7ed3\u679c"',title:'"\u8fd0\u884c\u7ed3\u679c"'}),"Routing Topic Consumer 1 => Routing Topic model message | RoutingKey [user.save]\n--------------------------------------------------------------------------------------\nRouting Topic Consumer 2 => Routing Topic model message | RoutingKey [user.save]\nRouting Topic Consumer 2 => Routing Topic model message | RoutingKey [user.save.1]\n")))}m.isMDXComponent=!0},565:function(e,n,t){"use strict";t.d(n,"a",(function(){return b})),t.d(n,"b",(function(){return g}));var o=t(0),a=t.n(o);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function u(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=a.a.createContext({}),c=function(e){var n=a.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):u(u({},n),e)),t},b=function(e){var n=c(e.components);return a.a.createElement(s.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return a.a.createElement(a.a.Fragment,{},n)}},d=a.a.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,r=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),b=c(t),d=o,g=b["".concat(r,".").concat(d)]||b[d]||m[d]||i;return t?a.a.createElement(g,u(u({ref:n},s),{},{components:t})):a.a.createElement(g,u({ref:n},s))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,r=new Array(i);r[0]=d;var u={};for(var l in n)hasOwnProperty.call(n,l)&&(u[l]=n[l]);u.originalType=e,u.mdxType="string"==typeof e?e:o,r[1]=u;for(var s=2;s<i;s++)r[s]=t[s];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},566:function(e,n,t){"use strict";function o(e){var n,t,a="";if("string"==typeof e||"number"==typeof e)a+=e;else if("object"==typeof e)if(Array.isArray(e))for(n=0;n<e.length;n++)e[n]&&(t=o(e[n]))&&(a&&(a+=" "),a+=t);else for(n in e)e[n]&&(a&&(a+=" "),a+=n);return a}n.a=function(){for(var e,n,t=0,a="";t<arguments.length;)(e=arguments[t++])&&(n=o(e))&&(a&&(a+=" "),a+=n);return a}},567:function(e,n,t){"use strict";var o=t(0);const a=Object(o.createContext)(void 0);n.a=a},568:function(e,n,t){"use strict";var o=t(0),a=t(567);n.a=function(){const e=Object(o.useContext)(a.a);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},569:function(e,n,t){"use strict";var o=t(0),a=t.n(o),i=t(568),r=t(566),u=t(47),l=t.n(u);const s=37,c=39;n.a=function(e){const{block:n,children:t,defaultValue:u,values:b,groupId:m}=e,{tabGroupChoices:d,setTabGroupChoices:g}=Object(i.a)(),[p,j]=Object(o.useState)(u),[O,v]=Object(o.useState)(!1);if(null!=m){const e=d[m];null!=e&&e!==p&&b.some(n=>n.value===e)&&j(e)}const y=e=>{j(e),null!=m&&g(m,e)},C=[],R=e=>{e.metaKey||e.altKey||e.ctrlKey||v(!0)},f=()=>{v(!1)};return Object(o.useEffect)(()=>{window.addEventListener("keydown",R),window.addEventListener("mousedown",f)},[]),a.a.createElement("div",null,a.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:Object(r.a)("tabs",{"tabs--block":n})},b.map(({value:e,label:n})=>a.a.createElement("li",{role:"tab",tabIndex:0,"aria-selected":p===e,className:Object(r.a)("tabs__item",l.a.tabItem,{"tabs__item--active":p===e}),style:O?{}:{outline:"none"},key:e,ref:e=>C.push(e),onKeyDown:e=>{((e,n,t)=>{switch(t.keyCode){case c:((e,n)=>{const t=e.indexOf(n)+1;e[t]?e[t].focus():e[0].focus()})(e,n);break;case s:((e,n)=>{const t=e.indexOf(n)-1;e[t]?e[t].focus():e[e.length-1].focus()})(e,n)}})(C,e.target,e),R(e)},onFocus:()=>y(e),onClick:()=>{y(e),v(!1)},onPointerDown:()=>v(!1)},n))),a.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},o.Children.toArray(t).filter(e=>e.props.value===p)[0]))}},570:function(e,n,t){"use strict";var o=t(0),a=t.n(o);n.a=function(e){return a.a.createElement("div",null,e.children)}}}]);